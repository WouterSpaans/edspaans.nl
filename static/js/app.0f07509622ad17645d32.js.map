{"version":3,"sources":["webpack:///src/components/Map.vue","webpack:///./src/components/Map.vue?52c5","webpack:///./src/components/Map.vue","webpack:///src/App.vue","webpack:///./src/App.vue?f4ec","webpack:///./src/App.vue","webpack:///./src/main.js"],"names":["Map","OwntracksBase","this","OwntracksUser","OwntracksDevice","OwntracksFielde","OwntracksFrom","OwntracksTo","Date","getTime","UpdateMap","LatLngBounds","bounds","map","getDate","currentDay","index","lon","toString","daynumber","_this","OwntracksUrl","then","response","data","url","res","json","google","components_Map","render","_h","$createElement","_self","_c","attrs","id","staticRenderFns","App","__webpack_require__","normalizeComponent","ssrContext","selectortype_template_index_0_src_App","src_App","App_normalizeComponent","vue_esm","config","productionTip","el","components","template"],"mappings":"2KAQAA,QAEA,2CAGA,wEACA,yBACA,6BACA,gCACA,mCACA,sDAGA,qDAIAC,cAAA,SAAAC,KACAC,cAAA,WAAAD,KACAE,gBAAA,WAAAF,KACAG,gBAAA,SAAAH,KACAI,cAAA,OAAAJ,KACAK,YAAA,iBAAAC,MACAC,+CAKAC,qJAKA,+BAEAC,+FAIAC,8FAKA,wBACA,gBAEA,WAEAC,kBAGA,IACA,+CAEAC,mBAEAC,WACA,oBAIA,SAEA,2CAGAC,mEAIAC,aACAC,eAEAL,IAEAM,sCAKA,IAAAC,EAAAlB,kBACAmB,cAAAC,KAAA,SAAAC,4BAEAC,qCAIAH,qBACA,qEAEAI,GAAAH,KAAA,SAAAI,YACAC,2EAEA,qBACAhB,+DAEA,IACA,IAEA,0FAIA,wBACA,gBAGA,uBAEA,SACAK,yCACAC,6BACAH,sBACA,GACAC,YACA,yDAGAE,aACAC,eAEAL,IACAM,sBAKA,yDAIAF,SACAJ,OAJA,uGAQA,gCACAD,YACAC,oCAMA,gDACAX,mCAEA0B,IACAlB,gBC1JAmB,GADiBC,OAFjB,WAA0B,IAAaC,EAAb7B,KAAa8B,eAAkD,OAA/D9B,KAAuC+B,MAAAC,IAAAH,GAAwB,OAAiBI,OAAOC,GAAA,UAEhGC,oBCCjB,ICKAC,QAEA,kBAGAtC,IDVAuC,EAAA,OAcAC,CACAxC,EACA6B,GATA,EAVA,SAAAY,GACAF,EAAA,SAaA,kBAEA,MAUA,UEvBAG,GADiBZ,OAFjB,WAA0B,IAAaC,EAAb7B,KAAa8B,eAA0BE,EAAvChC,KAAuC+B,MAAAC,IAAAH,EAAwB,OAAAG,EAAA,OAAiBC,OAAOC,GAAA,SAAYF,EAAA,YAE5GG,oBCCjB,IAuBAM,EAvBAJ,EAAA,OAcAK,CACAN,EACAI,GATA,EAVA,SAAAD,GACAF,EAAA,SAaA,KAEA,MAUA,QCrBAM,EAAA,EAAIC,OAAOC,eAAgB,EAG3B,IAAIF,EAAA,GACFG,GAAI,OACJC,YAAcX,IAAAK,GACdO,SAAU","file":"static/js/app.0f07509622ad17645d32.js","sourcesContent":["<template>\r\n  <div id='map'></div>\r\n</template>\r\n\r\n<script>\r\nimport 'isomorphic-fetch'\r\nimport GoogleMapsLoader from 'google-maps'\r\nimport axios from 'axios'\r\nexport default {\r\n  name: 'Map',\r\n  data () {\r\n    return {\r\n      OwntracksBase: 'https://owntracks.edspaans.nl/owntracks/api/0/locations',\r\n      OwntracksUser: 'wouter',\r\n      OwntracksDevice: 'samsung-ed',\r\n      OwntracksFielde: 'tst,lat,lon,acc',\r\n      OwntracksFrom: '2018-03-21T09:06:00Z',\r\n      OwntracksTo: '2018-04-25T22:06:00Z',\r\n      OwntracksCoordinates: [],\r\n      google: null\r\n    }\r\n  },\r\n  computed: {\r\n    OwntracksUrl: function () {\r\n      return this.OwntracksBase +\r\n        '?user=' + this.OwntracksUser +\r\n        '&device=' + this.OwntracksDevice +\r\n        '&fields=' + this.OwntracksFielde +\r\n        '&from=' + this.OwntracksFrom +\r\n        '&to=' + this.OwntracksTo +\r\n        '&nocache=' + new Date().getTime()\r\n    }\r\n  },\r\n  watch: {\r\n    OwntracksTo: function () {\r\n      this.UpdateMap()\r\n    },\r\n    OwntracksCoordinates: function (val) {\r\n      let filteredCoords = val.data.filter(function (coord) { return coord.acc <= 100 })\r\n      let map = new this.google.maps.Map(document.getElementById('map'))\r\n\r\n      // Set viewport (bounds)\r\n      let bounds = new this.google.maps.LatLngBounds()\r\n      // eslint-disable-next-line\r\n      filteredCoords.forEach(coord => { bounds.extend(new google.maps.LatLng(coord.lat, coord.lon)) })\r\n      map.fitBounds(bounds)\r\n\r\n      // Draw the line\r\n      // eslint-disable-next-line\r\n      let polyline = new google.maps.Polyline({\r\n        path: filteredCoords.map(function (e) { return { lat: e.lat, lng: e.lon } }),\r\n        strokeColor: '#FF0000',\r\n        strokeOpacity: 0.6,\r\n        strokeWeight: 5\r\n      })\r\n      polyline.setMap(map)\r\n\r\n      // Get all marker indexes\r\n      var markerIndexes = []\r\n      let previousDay = 0\r\n      let currentDay = 0\r\n      for (let index = 1; index < filteredCoords.length; index++) {\r\n        currentDay = new Date(filteredCoords[index].tst * 1000).getDate()\r\n        if (currentDay !== previousDay) {\r\n          previousDay = currentDay\r\n          markerIndexes.push(index - 1)\r\n        }\r\n      }\r\n      markerIndexes.push(filteredCoords.length - 1)\r\n\r\n      // Draw all markers\r\n      let daynumber = 0\r\n      markerIndexes.forEach(index => {\r\n        if (daynumber !== 11) {\r\n          const coord = filteredCoords[index]\r\n          // eslint-disable-next-line\r\n          let marker = new google.maps.Marker({\r\n            // eslint-disable-next-line\r\n            position: new google.maps.LatLng(coord.lat, coord.lon),\r\n            label: daynumber.toString(),\r\n            map: map\r\n          })\r\n        }\r\n        daynumber++\r\n      })\r\n    }\r\n  },\r\n  methods: {\r\n    UpdateMap: function () {\r\n      axios.get(this.OwntracksUrl)\r\n        .then(response => {\r\n          this.OwntracksCoordinates = response.data\r\n        })\r\n    },\r\n    OldWay: function () {\r\n      let url = this.OwntracksUrl\r\n      GoogleMapsLoader.KEY = 'AIzaSyC-QX42CVqFcXoxHh-DTJXw6h-6BTuUO2s'\r\n      GoogleMapsLoader.load(function (google) {\r\n        fetch(url)\r\n          .then(res => res.json())\r\n          .then((out) => {\r\n            let map = new google.maps.Map(document.getElementById('map'))\r\n            let bounds = new google.maps.LatLngBounds()\r\n            let filteredCoords = out.data.filter(function (coord) { return coord.acc <= 100 })\r\n            let daynumber = 0\r\n            let previousDay = 0\r\n            let currentDay = 0\r\n\r\n            // Draw the line\r\n            let polyline = new google.maps.Polyline({\r\n              path: filteredCoords.map(function (e) { return { lat: e.lat, lng: e.lon } }),\r\n              strokeColor: '#FF0000',\r\n              strokeOpacity: 0.6,\r\n              strokeWeight: 5\r\n            })\r\n\r\n            // Add all the markers for the days\r\n            for (let index = 0; index < filteredCoords.length; index++) {\r\n              const coord = filteredCoords[index]\r\n              bounds.extend(new google.maps.LatLng(coord.lat, coord.lon))\r\n              currentDay = new Date(coord.tst * 1000).getDate()\r\n              if (currentDay !== previousDay && index !== 0) {\r\n                previousDay = currentDay\r\n                const previousCoord = filteredCoords[index - 1]\r\n                // eslint-disable-next-line\r\n                let marker = new google.maps.Marker({\r\n                  position: new google.maps.LatLng(previousCoord.lat, previousCoord.lon),\r\n                  label: daynumber.toString(),\r\n                  map: map\r\n                })\r\n                daynumber++\r\n              }\r\n            }\r\n\r\n            // Add the last one\r\n            const lastCoord = filteredCoords[filteredCoords.length - 1]\r\n            var image = 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png'\r\n            // eslint-disable-next-line\r\n            let marker = new google.maps.Marker({\r\n              position: new google.maps.LatLng(lastCoord.lat, lastCoord.lon),\r\n              map: map,\r\n              icon: image,\r\n              title: 'Huidige positie'\r\n            })\r\n\r\n            map.fitBounds(bounds)\r\n            polyline.setMap(map)\r\n          })\r\n      })\r\n    }\r\n  },\r\n  mounted: function () {\r\n    GoogleMapsLoader.KEY = 'AIzaSyC-QX42CVqFcXoxHh-DTJXw6h-6BTuUO2s'\r\n    var parent = this\r\n    GoogleMapsLoader.load(function (google) {\r\n      parent.google = google\r\n      parent.UpdateMap()\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#map {\r\n  height: 100vh;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Map.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"map\"}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-da27a154\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Map.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-da27a154\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Map.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Map.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Map.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-da27a154\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Map.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-da27a154\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Map.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id=\"app\">\r\n    <Map/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Map from './components/Map'\r\nexport default {\r\n  name: 'App',\r\n  components: {\r\n    Map\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Map')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-8171061a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8171061a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8171061a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}